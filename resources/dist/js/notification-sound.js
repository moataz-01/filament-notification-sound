document.addEventListener("livewire:initialized",()=>{const c=window.filamentNotificationSoundConfig||{soundPath:"/sounds/notification.mp3",showAnimation:!0,volume:1};let a=0;const e=new Audio(c.soundPath);e.volume=c.volume;let r=!1;const t=()=>{r||e.play().then(()=>{e.pause(),e.currentTime=0,r=!0,m()}).catch(n=>{})},m=()=>{document.removeEventListener("click",t),document.removeEventListener("keydown",t),document.removeEventListener("touchstart",t)};document.addEventListener("click",t),document.addEventListener("keydown",t),document.addEventListener("touchstart",t);const d=()=>{const n=['[x-ref="notifications-trigger"] span',".fi-topbar-database-notifications-btn .fi-badge",'[wire\\:click="openDatabaseNotifications"] .fi-badge',".fi-icon-btn-badge"];for(const u of n){const o=document.querySelector(u);if(o){const s=parseInt(o.innerText);if(!isNaN(s))return s}}return 0};a=d(),Livewire.hook("commit",({component:n,commit:u,succeed:o,fail:s,respond:g})=>{o(({snapshot:h,effect:p})=>{(n.name.includes("database-notifications")||n.el.querySelector('[x-ref="notifications-trigger"]')||n.el.querySelector(".fi-icon-btn-badge"))&&setTimeout(()=>{const f=d();if(f>a&&(e.currentTime=0,e.play().catch(()=>{}),c.showAnimation)){const b=['[x-ref="notifications-trigger"]',".fi-topbar-database-notifications-btn",".fi-icon-btn-badge"];let i=null;for(const v of b){const l=document.querySelector(v);if(l){i=l;break}}i&&(i.classList.add("notification-pulse"),setTimeout(()=>{i.classList.remove("notification-pulse")},4e3))}a=f},50)})})});
